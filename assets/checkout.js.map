{"version":3,"file":"checkout.js","mappings":"yBAAO,MAAMA,EAAc,GACdC,EAAc,SACdC,EAAc,SCA3B,SAASC,EAAkBC,EAAMC,GAC/B,MAAMC,EAAOF,EAAKG,aAAa,QAE/B,IACE,MAAMC,EAAa,IAAIC,IAAIC,OAAOC,UAC5BC,EAAY,IAAIH,IAAIH,GAE1B,GAAIM,EAAUC,WAAaL,EAAWK,SAAU,OAGhD,MAAMC,GDGsBC,ECHSH,EAAUG,UDIpCC,WAAWf,GACfc,EAASE,MAAMhB,EAAYiB,QAChCH,EAASC,WAAWd,GACfa,EAASE,MAAMf,EAAYgB,QAC7BH,ECLCI,EDXH,SAA0Bd,GAC/B,OAAQA,GACN,IAAK,MACH,OAAOJ,EACT,IAAK,MACH,OAAOC,EACT,QACE,OAAOF,EAEb,CCE0BoB,CAAiBf,GACjCgB,EAAiB,GAAGF,IAAgBL,IAE1CN,EAAWO,SAAWM,EAEtBjB,EAAKkB,aAAa,OAAQd,EAC5B,CAAE,MAAOe,GAET,CDRK,IAAyBR,CCShC,EAMES,EAoBCd,OAAOe,SAASD,GApBfE,UAAUC,GAAG,aAAa,WAE1B,GAAIC,QAAQH,SAASI,YACnB,IAEE,MAAMC,EAAgBF,QAAQG,SAASC,qBAEvC,GAAsB,QAAlBF,EAAyB,OAE7B,MAAMG,EAAcP,SAASQ,iBAAiB,UAE9C,IAAKD,EAAYf,OAAQ,OAEzBe,EAAYE,SAAS/B,GAASD,EAAkBC,EAAM0B,IACxD,CAAE,MAAOP,GAGT,CAEJ,G","sources":["webpack://verso-shopify-theme/./src/js/helpers/market.js","webpack://verso-shopify-theme/./src/checkout.js"],"sourcesContent":["export const USD_SUBPATH = \"\";\nexport const GBP_SUBPATH = \"/en-gb\";\nexport const CAD_SUBPATH = \"/en-ca\";\n\nexport function getMarketSubpath(currency) {\n  switch (currency) {\n    case \"GBP\":\n      return GBP_SUBPATH;\n    case \"CAD\":\n      return CAD_SUBPATH;\n    default:\n      return USD_SUBPATH;\n  }\n}\n\nexport function getBasePathname(pathname) {\n  if (pathname.startsWith(GBP_SUBPATH))\n    return pathname.slice(GBP_SUBPATH.length);\n  if (pathname.startsWith(CAD_SUBPATH))\n    return pathname.slice(CAD_SUBPATH.length);\n  return pathname;\n}\n","import { getBasePathname, getMarketSubpath } from \"./js/helpers/market\";\n\nfunction maybeLocalizeHref(node, currency) {\n  const href = node.getAttribute(\"href\");\n\n  try {\n    const currentUrl = new URL(window.location);\n    const anchorUrl = new URL(href);\n\n    if (anchorUrl.hostname !== currentUrl.hostname) return;\n\n    // strip any existing market subpath\n    const basePathname = getBasePathname(anchorUrl.pathname);\n\n    // prepend the subpath for the customer's market\n    const marketSubpath = getMarketSubpath(currency);\n    const marketPathname = `${marketSubpath}${basePathname}`;\n\n    currentUrl.pathname = marketPathname;\n\n    node.setAttribute(\"href\", currentUrl);\n  } catch (error) {\n    // eslint-disable no-empty\n  }\n}\n\n/**\n * Replace same-origin URLs on order status page with market-aware ones\n */\n(function ($) {\n  $(document).on(\"page:load\", function () {\n    // eslint-disable-next-line no-undef\n    if (Shopify.Checkout.OrderStatus) {\n      try {\n        // eslint-disable-next-line no-undef\n        const orderCurrency = Shopify.checkout.presentment_currency;\n\n        if (orderCurrency === \"USD\") return;\n\n        const anchorNodes = document.querySelectorAll(\"[href]\");\n\n        if (!anchorNodes.length) return;\n\n        anchorNodes.forEach((node) => maybeLocalizeHref(node, orderCurrency));\n      } catch (error) {\n        // silently fail on error. this is not essential functionality and\n        // shouldn't break anything if e.g. the signature of the `Shopify` object changes\n      }\n    }\n  });\n})(window.Checkout.$);\n"],"names":["USD_SUBPATH","GBP_SUBPATH","CAD_SUBPATH","maybeLocalizeHref","node","currency","href","getAttribute","currentUrl","URL","window","location","anchorUrl","hostname","basePathname","pathname","startsWith","slice","length","marketSubpath","getMarketSubpath","marketPathname","setAttribute","error","$","Checkout","document","on","Shopify","OrderStatus","orderCurrency","checkout","presentment_currency","anchorNodes","querySelectorAll","forEach"],"sourceRoot":""}